# Lab 3 - Behavioral Design Patterns

**Course:** Tehnici si Metode de Proiectare Software (TMPS)  
**Student:** Bulat Cristian  
**Date:** November 2025

## ğŸ¯ Project Overview

This project demonstrates three behavioral design patterns in a Computer Shop Order Management system:

1. **Observer Pattern**
2. **Strategy Pattern**
3. **Command Pattern**

Behavioral patterns focus on communication between objects, defining how objects interact and distribute responsibilities. This lab extends the computer shop domain from previous labs with sophisticated order management capabilities.

## ğŸ”§ Requirements

- **Java:** JDK 17 or higher
- **Build Tool:** Maven 3.6+
- **Testing:** JUnit 5

## ğŸ—ï¸ Project Structure

```
Lab3/
â”œâ”€â”€ pom.xml
â”œâ”€â”€ README.md
â”œâ”€â”€ LAB_REPORT.md
â”œâ”€â”€ QUICK_START.md
â””â”€â”€ src/
    â”œâ”€â”€ main/java/md/utm/tmps/
    â”‚   â”œâ”€â”€ Main.java
    â”‚   â”œâ”€â”€ client/
    â”‚   â”‚   â””â”€â”€ ComputerShop.java
    â”‚   â”œâ”€â”€ domain/
    â”‚   â”‚   â”œâ”€â”€ models/
    â”‚   â”‚   â”‚   â”œâ”€â”€ Computer.java
    â”‚   â”‚   â”‚   â”œâ”€â”€ ComputerFactory.java
    â”‚   â”‚   â”‚   â””â”€â”€ Order.java
    â”‚   â”‚   â”œâ”€â”€ observer/
    â”‚   â”‚   â”‚   â”œâ”€â”€ OrderObserver.java
    â”‚   â”‚   â”‚   â”œâ”€â”€ OrderSubject.java
    â”‚   â”‚   â”‚   â”œâ”€â”€ OrderManager.java
    â”‚   â”‚   â”‚   â”œâ”€â”€ CustomerNotificationObserver.java
    â”‚   â”‚   â”‚   â”œâ”€â”€ InventoryObserver.java
    â”‚   â”‚   â”‚   â””â”€â”€ AnalyticsObserver.java
    â”‚   â”‚   â”œâ”€â”€ strategy/
    â”‚   â”‚   â”‚   â”œâ”€â”€ PricingStrategy.java
    â”‚   â”‚   â”‚   â”œâ”€â”€ PricingContext.java
    â”‚   â”‚   â”‚   â”œâ”€â”€ RegularPricingStrategy.java
    â”‚   â”‚   â”‚   â”œâ”€â”€ StudentDiscountStrategy.java
    â”‚   â”‚   â”‚   â”œâ”€â”€ BulkOrderStrategy.java
    â”‚   â”‚   â”‚   â””â”€â”€ HolidaySaleStrategy.java
    â”‚   â”‚   â””â”€â”€ command/
    â”‚   â”‚       â”œâ”€â”€ OrderCommand.java
    â”‚   â”‚       â”œâ”€â”€ PlaceOrderCommand.java
    â”‚   â”‚       â”œâ”€â”€ CancelOrderCommand.java
    â”‚   â”‚       â”œâ”€â”€ UpdateOrderStatusCommand.java
    â”‚   â”‚       â””â”€â”€ OrderCommandInvoker.java
    â”‚   â””â”€â”€ utilities/
    â”‚       â””â”€â”€ OrderHistory.java
    â””â”€â”€ test/java/md/utm/tmps/
        â””â”€â”€ BehavioralPatternsTest.java
```

## ğŸš€ How to Run

See the `QUICK_START.md` file for detailed instructions.

**Quick commands:**
```bash
# Compile
mvn compile

# Run the demonstration
mvn exec:java -Dexec.mainClass="md.utm.tmps.Main"

# Run tests
mvn test
```

## ğŸ“š Behavioral Patterns Implemented

### 1. Observer Pattern
**Purpose:** Defines a one-to-many dependency between objects so that when one object changes state, all its dependents are notified automatically.

**Implementation:** Order status changes trigger notifications to multiple systems.

**Key Classes:**
- `OrderSubject` - Subject interface with attach/detach/notify methods
- `OrderObserver` - Observer interface with update method
- `OrderManager` - Concrete subject managing orders and notifications
- `CustomerNotificationObserver` - Sends customer emails
- `InventoryObserver` - Updates stock levels
- `AnalyticsObserver` - Tracks statistics and revenue

**Benefits:**
- Loose coupling between order management and dependent systems
- Easy to add new observers without modifying existing code
- Automatic notification of all interested parties

### 2. Strategy Pattern
**Purpose:** Defines a family of algorithms, encapsulates each one, and makes them interchangeable at runtime.

**Implementation:** Different pricing algorithms can be applied to orders.

**Key Classes:**
- `PricingStrategy` - Strategy interface
- `PricingContext` - Context that uses strategies
- `RegularPricingStrategy` - No discount
- `StudentDiscountStrategy` - 15% discount
- `BulkOrderStrategy` - Tiered discount (5%/10%/20%)
- `HolidaySaleStrategy` - Seasonal discounts (Black Friday, etc.)

**Benefits:**
- Pricing logic separated from order logic
- Easy to add new pricing strategies
- Can change pricing algorithm at runtime
- No conditional statements for pricing decisions

### 3. Command Pattern
**Purpose:** Encapsulates a request as an object, allowing parameterization, queuing, logging, and undoable operations.

**Implementation:** Order operations are encapsulated as command objects.

**Key Classes:**
- `OrderCommand` - Command interface with execute/undo
- `PlaceOrderCommand` - Creates and confirms orders
- `CancelOrderCommand` - Cancels existing orders
- `UpdateOrderStatusCommand` - Changes order status
- `OrderCommandInvoker` - Executes commands and maintains history

**Benefits:**
- Operations can be undone
- Complete operation history
- Commands can be queued or scheduled
- Decouples request sender from receiver

## ğŸ”— Pattern Integration

The three patterns work together seamlessly:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CLIENT                                â”‚
â”‚                 (ComputerShop)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                       â”‚
         â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ COMMAND PATTERN â”‚    â”‚STRATEGY PATTERN â”‚
â”‚    (Invoker)    â”‚    â”‚   (Pricing)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ OBSERVER PATTERNâ”‚
         â”‚ (OrderManager)  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚             â”‚             â”‚
    â–¼             â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Customerâ”‚  â”‚Inventoryâ”‚  â”‚Analytics â”‚
â”‚Observerâ”‚  â”‚Observer â”‚  â”‚Observer  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Integration Flow:**
1. **Command** encapsulates order operations
2. **Strategy** calculates pricing within commands
3. **Observer** notifies all systems when order state changes

## ğŸ§ª Testing

Comprehensive JUnit 5 tests covering:
- Observer registration and notification
- Strategy calculations for all discount types
- Command execution and undo functionality
- Integration between all patterns

**Run tests with:** `mvn test`

## ğŸ’¡ Design Decisions

1. **Observer for Notifications:** Natural fit for multiple systems needing order updates
2. **Strategy for Pricing:** Allows flexible, runtime-changeable discount calculations
3. **Command for Operations:** Enables undo functionality and operation tracking
4. **Single Client:** ComputerShop orchestrates all patterns as required

## ğŸ“– Additional Documentation

- `LAB_REPORT.md` - Detailed pattern explanations and theory
- `QUICK_START.md` - Step-by-step execution guide

## âœ… Pattern Benefits Demonstrated

| Pattern | Key Benefit | Example in Project |
|---------|-------------|-------------------|
| Observer | Automatic notifications | Multiple systems react to order changes |
| Strategy | Runtime flexibility | Switch between pricing algorithms |
| Command | Undo support | Cancel placed orders |

## ğŸ“ Learning Objectives

This lab demonstrates:
- How behavioral patterns handle object communication
- Event-driven architecture with Observer
- Algorithm encapsulation with Strategy
- Operation encapsulation with Command
- How patterns complement each other